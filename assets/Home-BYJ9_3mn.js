import{u as z,r as t,a as B,j as s,F as G,t as H}from"./index-DTfLEByv.js";import{g as I}from"./bookMgmtApi-JLWzLEei.js";import{s as K,u as U,a as _}from"./toastUpdating-4Z3rWBdx.js";import{c as q}from"./createLucideIcon--uAUVApa.js";/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],O=q("funnel",M),V=()=>{const f=z(),[c,p]=t.useState({keyword:"",theLoais:[]}),[v,N]=t.useState([]),[i,l]=t.useState([]),[T,r]=t.useState(!1),[x,S]=t.useState(1),[h,g]=t.useState(1),[o,d]=t.useState(1),[L,b]=t.useState(0),u=t.useRef(null),m=t.useRef(null);t.useEffect(()=>{const e=a=>{const n=a.target;u.current&&!u.current.contains(n)&&m.current&&!m.current.contains(n)&&r(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[]),t.useEffect(()=>{A(),g(o),F()},[o,c]);const k=e=>{i.includes(e)?l(a=>a.filter(n=>n!==e)):l(a=>[...a,e])},y=()=>{p({...c,theLoais:i}),r(!1)},C=()=>{l([])},[j,w]=t.useState(""),[E,P]=t.useState([]),F=async()=>{let e;setTimeout(()=>{e=K("Äang táº£i sÃ¡ch...")},0);try{const a=await I({...c,page:o});P(a.data||[]),S(a.totalPages||1),g(a.currentPage||1),b(a.totalElements||0),U(e,"Loaded Successfully!")}catch(a){console.error("Lá»—i khi fetch sÃ¡ch:",a),_(e,"KhÃ´ng káº¿t ná»‘i Ä‘Æ°á»£c Ä‘áº¿n mÃ¡y chá»§.")}},A=async()=>{try{const e=await B.get("http://localhost:8080/theLoai/getAll");N(e.data)}catch(e){console.error("Lá»—i fetch thá»ƒ loáº¡i",e)}},R=()=>{o>1&&d(e=>e-1)},$=()=>{d(e=>e+1)};return s.jsxs("div",{className:"home-container",children:[s.jsxs("h1",{className:"title-home",children:["KhÃ¡m phÃ¡ kho sÃ¡ch báº¥t táº­n cá»§a chÃºng tÃ´i (",L,") ðŸ“šâœ¨"]}),s.jsxs("div",{className:"search-bar-home",children:[s.jsxs("div",{className:"search-input-wrapper",children:[s.jsx("input",{type:"text",placeholder:"TÃ¬m kiáº¿m sÃ¡ch theo tÃªn, tÃ¡c giáº£, nhÃ  xuáº¥t báº£n...",value:j,onChange:e=>w(e.target.value)}),s.jsx("button",{className:"search-button-inside",onClick:()=>{d(1),p({...c,keyword:j})},children:s.jsx(G,{})})]}),s.jsxs("div",{className:"filter-wrapper",children:[s.jsx("button",{ref:m,className:"filter-icon-home",title:"Lá»c theo thá»ƒ loáº¡i",onClick:()=>r(e=>!e),children:s.jsx(O,{size:15})}),T&&s.jsxs("div",{ref:u,className:"popup-theloai",children:[s.jsx("div",{className:"popup-arrow"}),s.jsx("div",{className:"theloai-list",children:v.map(e=>s.jsx("div",{className:`theloai-item ${i.includes(e)?"selected":""}`,onClick:()=>k(e),children:e},e))}),s.jsxs("div",{className:"theloai-actions",children:[s.jsx("button",{onClick:C,className:"clear-button",children:"âŒ XoÃ¡ chá»n"}),s.jsx("button",{onClick:y,className:"apply-button",children:"âœ… TÃ¬m kiáº¿m"})]})]})]})]}),s.jsx("div",{className:"book-grid-home",children:E.map(e=>s.jsxs("div",{className:"book-card-home",children:[s.jsx("div",{className:"book-image-home",children:s.jsx("img",{src:`data:image/jpeg;base64,${e.anhBia}`,alt:e.tenSach})}),s.jsxs("div",{className:"book-info-home",children:[s.jsx("h3",{children:e.tenSach}),s.jsx("p",{children:e.tacGia})]}),s.jsx("div",{className:"overlay-home",children:s.jsxs("button",{className:"detail-button-home",onClick:()=>f(`/chitietsach/${e.id}/${H(e.tenSach)}`),children:[s.jsx("img",{src:"/images/info.png",alt:"info",className:"icon-home-detail"}),"Chi tiáº¿t"]})})]},e.id))}),s.jsxs("div",{className:"pagination-book",children:[s.jsx("button",{onClick:R,disabled:h===1,children:"Trang trÆ°á»›c"}),s.jsxs("span",{children:["Trang ",h," / ",x]}),s.jsx("button",{onClick:$,disabled:h>=x,children:"Trang sau"})]})]})};export{V as default};
